<!DOCTYPE html>
<!-- Coding By CodingNepal - youtube.com/codingnepal -->
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">  
    <title>Memory Game</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
      li {
        list-style-type: none;
      }
      .individualCard img {
        width: 5rem;
      }
      .back {
        backface-visibility: visible;
        animation: mymove 3s infinite;
      }
      @keyframes mymove {
        from {transform: rotateY(0deg);}
        to {transform: rotateY(36deg);}
      }
    </style>
  </head>
  <body>
    <div class="wrapper">
      <ul class="cards">
        <!--ONE CARD---------------------------------------------------------------->
        <li class="individualCard">
          <div class="front">
            <img src="matchingCover.png" alt="icon">
          </div>
          <div class="back">
            <img src="matchingColor1.png" alt="card-img" class="set1" id="card1set1">
          </div>
        </li>
        <!--ONE CARD END---------------------------------------------------------------->

      </ul>
    </div>
  </body>
  <script>
    const cards = document.querySelectorAll(".card");
    //here, we are creating a variable called 'cards' and using document.querySelectorAll to take all of the elements that are in the class 'card'
    let matched = 0;
    let cardOne, cardTwo;
    let disableDeck = false;


    function flipCard({target: clickedCard}) {//this function flips the card
        if(cardOne !== clickedCard && !disableDeck) {
            clickedCard.classList.add("flip");
            if(!cardOne) {
                return cardOne = clickedCard;
            }
            cardTwo = clickedCard;
            disableDeck = true;
            let cardOneImg = cardOne.querySelector(".back-view img").src,
            cardTwoImg = cardTwo.querySelector(".back-view img").src;
            matchCards(cardOneImg, cardTwoImg);
        }
    }
    function matchCards(img1, img2) {//this determines if the cards match
        if(img1 === img2) {
            matched++;
            if(matched == 8) {
                setTimeout(() => {
                    return shuffleCard();
                }, 1000);
            }
            cardOne.removeEventListener("click", flipCard);
            cardTwo.removeEventListener("click", flipCard);
            cardOne = cardTwo = "";
            return disableDeck = false;
        }
        setTimeout(() => {
            cardOne.classList.add("shake");
            cardTwo.classList.add("shake");
        }, 400);
        setTimeout(() => {
            cardOne.classList.remove("shake", "flip");
            cardTwo.classList.remove("shake", "flip");
            cardOne = cardTwo = "";
            disableDeck = false;
        }, 1200);
    }


    function shuffleCard() {//this moves the cards around
        matched = 0;
        disableDeck = false;
        cardOne = cardTwo = "";
        let arr = [1, 2, 3, 4, 5, 6, 7, 8, 1, 2, 3, 4, 5, 6, 7, 8];
        arr.sort(() => Math.random() > 0.5 ? 1 : -1);
        cards.forEach((card, i) => {
            card.classList.remove("flip");
            let imgTag = card.querySelector(".back-view img");
            imgTag.src = `images/img-${arr[i]}.png`;
            card.addEventListener("click", flipCard);
        });
    }

    //call the function
    shuffleCard();
        
    cards.forEach(card => {//HELP
        card.addEventListener("click", flipCard);
    });
  </script>
  
</html>